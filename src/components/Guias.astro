---
import Libro from "./icons/Libro.astro";
import Reciclable from "./icons/Reciclable.astro";
import Hoja from "./icons/Hoja.astro";
---

<section class="md:flex pt-16">
  <div
    id="celeste"
    class="bg-celeste text-amarillo text-center h-72 flex flex-col justify-center md:w-[50%] md:h-[350px] xl:h-[400px]"
  >
    <a
      href="https://geasustentable.com.ar/guia-reciclables/"
      target="_blank"
      rel="noopener noreferrer"
    >
      <Reciclable
        class="size-12 mx-auto xl:size-16 2xl:size-20"
        fill="#e8e33c"
      />
      <h3 class="tracking-tighter text-xl xl:text-3xl 2xl:text-4xl">
        ¿Es reciclable o no?
      </h3>
    </a>
    <p
      class="font-gothamlight text-lg font-bold px-20 py-4 xl:text-xl 2xl:text-2xl"
    >
      Explorá nuestra guía de reciclables y sacate las dudas.
    </p>
  </div>
  <div
    class="bg-amarillo text-celeste text-center h-72 flex flex-col justify-center md:w-[50%] md:h-[350px] xl:h-[400px]"
  >
    <Libro class="size-12 mx-auto xl:size-16 2xl:size-20" />
    <h3 class="text-xl xl:text-3xl 2xl:text-4xl tracking-tighter">
      Descargá tus guías
    </h3>
    <div class="flex justify-center space-x-5 py-4">
      <a
        class="flex bg-celeste text-amarillo items-center px-4 py-2 hover:bg-white hover:text-celeste hover:duration-300 xl:text-lg 2xl:text-xl"
        href="/pdf/compostaje.pdf"
        target="_blank"
        rel="noopener noreferrer"
      >
        <Hoja />
        Compostar
      </a>
      <a
        class="flex bg-celeste text-amarillo items-center px-6 py-2 hover:bg-white hover:text-celeste hover:duration-300 xl:text-lg 2xl:text-xl"
        href="/pdf/reciclar.pdf"
        target="_blank"
        rel="noopener noreferrer"
      >
        <Reciclable class="size-6" />
        Reciclar
      </a>
    </div>
  </div>
</section>
<section
  class="flex justify-center items-center text-center space-x-10 px-5 md:space-x-16 h-72 md:h-[350px] xl:h-[400px]"
>
  <img src="/toneladas.webp" alt="" />
  <div>
    <p
      class="max-w-full font-gothamlight text-celeste font-semibold text-xl md:text-2xl xl:text-3xl 2xl:text-4xl"
    >
      Llevamos <br />
      <span
        class="value text-amarillo font-gothambold"
        number="10000"
        tabular-nums>0</span
      >
      <span class="text-amarillo font-gothambold tabular-nums">toneladas</span>
      <br />
      <span class="font-gothambold">de materiales recuperados</span>
    </p>
  </div>
</section>

<script>
  const counters = document.querySelectorAll(".value");
  const speed = 350;

  counters.forEach((counter) => {
    const animate = () => {
      const value = +counter.getAttribute("number");
      const data = +counter.innerText;

      const time = value / speed;
      if (data < value) {
        counter.innerText = Math.ceil(data + time);
        setTimeout(animate, 1);
      } else {
        counter.innerText = value;
      }
    };

    animate();
  });
</script>

<style>
  #celeste {
    animation: reveal 4s linear backwards;
    animation-timeline: scroll();
    animation-range: entry 10% cover 20%;
  }

  @keyframes reveal {
    from {
      opacity: 0;
      translate: -100% 0;
    }
    to {
      opacity: 1;
      translate: 0 0;
    }
  }
</style>
